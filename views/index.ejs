<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRUD App - Node.js, Express, HTMX y MySQL</title>
  <meta name="description" content="CRUD App - Node.js, Express, HTMX y MySQL">
  <meta name="keywords" content="CRUD, Node.js, Express, HTMX, MySQL">
  <meta name="author" content="Urian Viera">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.bootstrap5.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
</head>
<body>
  <%- include('./partials/header.ejs') %>


  <div class="container p-5 my-5 custom_container">
    <div class="row">
      <div class="col-12">
        <% if (tasks && tasks.length > 0) { %>
          <div class="table-responsive">
            <table id="tasksTable" class="table table-modern">
              <thead>
                <tr>
                  <th scope="col" width="15%">Estado</th>
                  <th scope="col" width="25%">Título</th>
                  <th scope="col" width="30%">Descripción</th>
                  <th scope="col" width="15%">Fecha</th>
                  <th scope="col" width="15%" class="no-sort">Acciones</th>
                </tr>
              </thead>
              <tbody>
                <% tasks.forEach(function(task) { %>
                  <%- include('./partials/task-item.ejs', { task: task }) %>
                <% }); %>
              </tbody>
            </table>
          </div>
        <% } else { %>
          <div class="empty-state">
            <svg class="bi" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"/>
            </svg>
            <h4>No hay tareas disponibles</h4>
            <p>¡Haz clic en "Agregar Tarea" para comenzar!</p>
          </div>
        <% } %>
      </div>
    </div>
  </div>
     

  <%- include('./modals/addTask.ejs') %>

  <!-- Modal para editar tarea -->
  <div class="modal fade" id="editTaskModal" tabindex="-1" aria-labelledby="editTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div id="edit-modal-content">
          <!-- El contenido del modal se cargará dinámicamente -->
        </div>
      </div>
    </div>
  </div>



  <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/2.0.3/js/dataTables.js"></script>
  <script src="https://cdn.datatables.net/2.0.3/js/dataTables.bootstrap5.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"
    integrity="sha384-Akqfrbj/HpNVo8k11SXBb6TlBWmXXlYQrCSqEWmyKJe+hDm3Z/B2WVG4smwBkRVm" crossorigin="anonymous"></script>
  <script src="/js/app.js"></script>
</body>
</html>